{% extends "admin/base.html" %}

{% block title %}Client Logos{% endblock %}
{% block header %}Client Logos Management{% endblock %}

{% block content %}
<div class="mb-6">
    <button onclick="toggleAddForm()" 
            class="bg-[var(--primary-cyan)] text-black px-4 py-2 rounded hover:bg-cyan-400 transition-colors">
        Add New Client Logo
    </button>
</div>

<!-- Add Client Logo Form -->
<div id="addForm" class="hidden bg-gray-800 rounded-lg p-6 mb-6">
    <h3 class="text-lg font-semibold mb-4">Add New Client Logo</h3>
    <form method="POST" enctype="multipart/form-data" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="client_name" class="block text-sm font-medium mb-2">Client Name *</label>
                <input type="text" id="client_name" name="client_name" required
                       class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white">
            </div>
            <div>
                <label for="website_url" class="block text-sm font-medium mb-2">Website URL</label>
                <input type="url" id="website_url" name="website_url"
                       class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"
                       placeholder="https://example.com">
            </div>
        </div>
        
        <div>
            <label for="logo" class="block text-sm font-medium mb-2">Logo Image *</label>
            <input type="file" id="logo" name="logo" accept="image/*" required
                   class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white">
            <p class="text-sm text-gray-400 mt-1">Upload PNG, JPG, or GIF format. Recommended size: 200x100px</p>
        </div>
        
        <div>
            <label for="description" class="block text-sm font-medium mb-2">Description</label>
            <textarea id="description" name="description" rows="3"
                      class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"
                      placeholder="Brief description about the client or project"></textarea>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="display_order" class="block text-sm font-medium mb-2">Display Order</label>
                <input type="number" id="display_order" name="display_order" value="0"
                       class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"
                       placeholder="0 = first, higher numbers appear later">
            </div>
            <div>
                <label for="status" class="block text-sm font-medium mb-2">Status</label>
                <select id="status" name="status"
                        class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white">
                    <option value="active">Active</option>
                    <option value="inactive">Inactive</option>
                </select>
            </div>
        </div>
        
        <div class="flex space-x-4">
            <button type="submit" 
                    class="bg-[var(--primary-cyan)] text-black px-6 py-2 rounded hover:bg-cyan-400 transition-colors">
                Add Client Logo
            </button>
            <button type="button" onclick="toggleAddForm()"
                    class="bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-500 transition-colors">
                Cancel
            </button>
        </div>
    </form>
</div>

<!-- Client Logos List -->
<div class="bg-gray-800 rounded-lg overflow-hidden">
    <div class="p-6">
        <h3 class="text-lg font-semibold mb-4">Existing Client Logos ({{ client_logos|length }})</h3>
        
        {% if client_logos %}
        <div class="overflow-x-auto">
            <table class="w-full text-sm">
                <thead>
                    <tr class="border-b border-gray-700">
                        <th class="text-left py-3 px-4">Logo</th>
                        <th class="text-left py-3 px-4">Client Name</th>
                        <th class="text-left py-3 px-4">Website</th>
                        <th class="text-left py-3 px-4">Order</th>
                        <th class="text-left py-3 px-4">Status</th>
                        <th class="text-left py-3 px-4">Added</th>
                        <th class="text-left py-3 px-4">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for logo in client_logos %}
                    <tr class="border-b border-gray-700 hover:bg-gray-700/50">
                        <td class="py-3 px-4">
                            <img src="{{ logo.logo_url }}" alt="{{ logo.client_name }}" 
                                 class="h-12 w-auto object-contain bg-white rounded p-1">
                        </td>
                        <td class="py-3 px-4">
                            <div class="font-medium">{{ logo.client_name }}</div>
                            {% if logo.description %}
                            <div class="text-xs text-gray-400 mt-1">{{ logo.description[:100] }}{% if logo.description|length > 100 %}...{% endif %}</div>
                            {% endif %}
                        </td>
                        <td class="py-3 px-4">
                            {% if logo.website_url %}
                            <a href="{{ logo.website_url }}" target="_blank" 
                               class="text-[var(--primary-cyan)] hover:text-cyan-400 text-sm">
                                {{ logo.website_url[:30] }}{% if logo.website_url|length > 30 %}...{% endif %}
                            </a>
                            {% else %}
                            <span class="text-gray-400">-</span>
                            {% endif %}
                        </td>
                        <td class="py-3 px-4">{{ logo.display_order }}</td>
                        <td class="py-3 px-4">
                            <span class="px-2 py-1 text-xs rounded-full
                                         {% if logo.status == 'active' %}bg-green-900 text-green-300{% else %}bg-red-900 text-red-300{% endif %}">
                                {{ logo.status.title() }}
                            </span>
                        </td>
                        <td class="py-3 px-4 text-gray-400">{{ logo.created_at.strftime('%Y-%m-%d') }}</td>
                        <td class="py-3 px-4">
                            <div class="flex space-x-2">
                                <a href="{{ url_for('admin.toggle_client_logo_status', id=logo.id) }}"
                                   class="text-yellow-400 hover:text-yellow-300 text-sm"
                                   title="Toggle Status">
                                    {% if logo.status == 'active' %}Hide{% else %}Show{% endif %}
                                </a>
                                <a href="{{ url_for('admin.delete_client_logo', id=logo.id) }}"
                                   class="text-red-400 hover:text-red-300 text-sm"
                                   onclick="return confirm('Are you sure you want to delete this client logo?')"
                                   title="Delete">
                                    Delete
                                </a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="text-center py-8 text-gray-400">
            <svg class="mx-auto h-12 w-12 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
            <p>No client logos found.</p>
            <p class="text-sm">Add your first client logo to showcase your partnerships.</p>
        </div>
        {% endif %}
    </div>
</div>

<!-- Client Logo Preview -->
{% if client_logos %}
<div class="mt-6 bg-gray-800 rounded-lg p-6">
    <h3 class="text-lg font-semibold mb-4">Homepage Preview</h3>
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
        {% for logo in client_logos if logo.status == 'active' %}
        <div class="bg-white rounded p-3 flex items-center justify-center h-16">
            <img src="{{ logo.logo_url }}" alt="{{ logo.client_name }}" 
                 class="max-h-full max-w-full object-contain">
        </div>
        {% endfor %}
    </div>
    <p class="text-sm text-gray-400 mt-2">This is how your client logos will appear on the homepage</p>
</div>
{% endif %}
{% endblock %}

{% block scripts %}
<script>
function toggleAddForm() {
    const form = document.getElementById('addForm');
    if (form.classList.contains('hidden')) {
        form.classList.remove('hidden');
        window.scrollTo({ top: form.offsetTop - 100, behavior: 'smooth' });
    } else {
        form.classList.add('hidden');
    }
}
</script>
{% endblock %}